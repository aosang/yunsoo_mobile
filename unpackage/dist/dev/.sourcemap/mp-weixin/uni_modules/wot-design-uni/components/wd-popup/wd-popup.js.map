{"version":3,"file":"wd-popup.js","sources":["uni_modules/wot-design-uni/components/wd-popup/wd-popup.vue","D:/software/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RjoveXVuc29vX21vYmlsZS91bmlfbW9kdWxlcy93b3QtZGVzaWduLXVuaS9jb21wb25lbnRzL3dkLXBvcHVwL3dkLXBvcHVwLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"wd-popup-wrapper\">\r\n    <wd-overlay\r\n      v-if=\"modal\"\r\n      :show=\"modelValue\"\r\n      :z-index=\"zIndex\"\r\n      :lock-scroll=\"lockScroll\"\r\n      :duration=\"duration\"\r\n      :custom-style=\"modalStyle\"\r\n      @click=\"handleClickModal\"\r\n      @touchmove=\"noop\"\r\n    />\r\n    <wd-transition\r\n      :lazy-render=\"lazyRender\"\r\n      :custom-class=\"rootClass\"\r\n      :custom-style=\"style\"\r\n      :duration=\"duration\"\r\n      :show=\"modelValue\"\r\n      :name=\"transitionName\"\r\n      :destroy=\"hideWhenClose\"\r\n      @before-enter=\"emit('before-enter')\"\r\n      @enter=\"emit('enter')\"\r\n      @after-enter=\"emit('after-enter')\"\r\n      @before-leave=\"emit('before-leave')\"\r\n      @leave=\"emit('leave')\"\r\n      @after-leave=\"emit('after-leave')\"\r\n    >\r\n      <slot />\r\n      <wd-icon v-if=\"closable\" custom-class=\"wd-popup__close\" name=\"add\" @click=\"close\" />\r\n    </wd-transition>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nexport default {\r\n  name: 'wd-popup',\r\n  options: {\r\n    virtualHost: true,\r\n    addGlobalClass: true,\r\n    styleIsolation: 'shared'\r\n  }\r\n}\r\n</script>\r\n\r\n<script lang=\"ts\" setup>\r\nimport wdIcon from '../wd-icon/wd-icon.vue'\r\nimport wdOverlay from '../wd-overlay/wd-overlay.vue'\r\nimport wdTransition from '../wd-transition/wd-transition.vue'\r\nimport { computed, onBeforeMount, ref } from 'vue'\r\nimport { popupProps } from './types'\r\nimport type { TransitionName } from '../wd-transition/types'\r\n\r\nconst props = defineProps(popupProps)\r\nconst emit = defineEmits([\r\n  'update:modelValue',\r\n  'before-enter',\r\n  'enter',\r\n  'before-leave',\r\n  'leave',\r\n  'after-leave',\r\n  'after-enter',\r\n  'click-modal',\r\n  'close'\r\n])\r\n\r\n/**\r\n * 弹出位置\r\n */\r\nconst transitionName = computed<TransitionName | TransitionName[]>(() => {\r\n  if (props.transition) {\r\n    return props.transition\r\n  }\r\n  if (props.position === 'center') {\r\n    return ['zoom-in', 'fade']\r\n  }\r\n  if (props.position === 'left') {\r\n    return 'slide-left'\r\n  }\r\n  if (props.position === 'right') {\r\n    return 'slide-right'\r\n  }\r\n  if (props.position === 'bottom') {\r\n    return 'slide-up'\r\n  }\r\n  if (props.position === 'top') {\r\n    return 'slide-down'\r\n  }\r\n  return 'slide-up'\r\n})\r\n\r\nconst safeBottom = ref<number>(0)\r\n\r\nconst style = computed(() => {\r\n  return `z-index:${props.zIndex}; padding-bottom: ${safeBottom.value}px;${props.customStyle}`\r\n})\r\n\r\nconst rootClass = computed(() => {\r\n  return `wd-popup wd-popup--${props.position} ${!props.transition && props.position === 'center' ? 'is-deep' : ''} ${props.customClass || ''}`\r\n})\r\n\r\nonBeforeMount(() => {\r\n  if (props.safeAreaInsetBottom) {\r\n    const { safeArea, screenHeight, safeAreaInsets } = uni.getSystemInfoSync()\r\n\r\n    if (safeArea) {\r\n\r\n      safeBottom.value = screenHeight - (safeArea!.bottom || 0)\r\n\r\n\r\n\r\n\r\n    } else {\r\n      safeBottom.value = 0\r\n    }\r\n  }\r\n})\r\n\r\nfunction handleClickModal() {\r\n  emit('click-modal')\r\n  if (props.closeOnClickModal) {\r\n    close()\r\n  }\r\n}\r\n\r\nfunction close() {\r\n  emit('close')\r\n  emit('update:modelValue', false)\r\n}\r\nfunction noop() {}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import './index.scss';\r\n</style>\r\n","import Component from 'F:/yunsoo_mobile/uni_modules/wot-design-uni/components/wd-popup/wd-popup.vue'\nwx.createComponent(Component)"],"names":["computed","ref","onBeforeMount","uni"],"mappings":";;;;;;AA6CA,MAAA,SAAmB,MAAA;AACnB,MAAA,YAAsB,MAAA;AACtB,MAAA,eAAyB,MAAA;AAbzB,MAAA,cAAe;AAAA,EACb,MAAM;AAAA,EACN,SAAS;AAAA,IACP,aAAa;AAAA,IACb,gBAAgB;AAAA,IAChB,gBAAgB;AAAA,EAClB;AACF;;;;;;;;;;;;;;;;AAWA,UAAM,QAAQ;AACd,UAAM,OAAO;AAeP,UAAA,iBAAiBA,cAAAA,SAA4C,MAAM;AACvE,UAAI,MAAM,YAAY;AACpB,eAAO,MAAM;AAAA,MACf;AACI,UAAA,MAAM,aAAa,UAAU;AACxB,eAAA,CAAC,WAAW,MAAM;AAAA,MAC3B;AACI,UAAA,MAAM,aAAa,QAAQ;AACtB,eAAA;AAAA,MACT;AACI,UAAA,MAAM,aAAa,SAAS;AACvB,eAAA;AAAA,MACT;AACI,UAAA,MAAM,aAAa,UAAU;AACxB,eAAA;AAAA,MACT;AACI,UAAA,MAAM,aAAa,OAAO;AACrB,eAAA;AAAA,MACT;AACO,aAAA;AAAA,IAAA,CACR;AAEK,UAAA,aAAaC,kBAAY,CAAC;AAE1B,UAAA,QAAQD,cAAAA,SAAS,MAAM;AACpB,aAAA,WAAW,MAAM,MAAM,qBAAqB,WAAW,KAAK,MAAM,MAAM,WAAW;AAAA,IAAA,CAC3F;AAEK,UAAA,YAAYA,cAAAA,SAAS,MAAM;AAC/B,aAAO,sBAAsB,MAAM,QAAQ,IAAI,CAAC,MAAM,cAAc,MAAM,aAAa,WAAW,YAAY,EAAE,IAAI,MAAM,eAAe,EAAE;AAAA,IAAA,CAC5I;AAEDE,kBAAAA,cAAc,MAAM;AAClB,UAAI,MAAM,qBAAqB;AAC7B,cAAM,EAAE,UAAU,cAAc,eAAe,IAAIC,cAAAA,MAAI;AAEvD,YAAI,UAAU;AAED,qBAAA,QAAQ,gBAAgB,SAAU,UAAU;AAAA,QAAA,OAKlD;AACL,qBAAW,QAAQ;AAAA,QACrB;AAAA,MACF;AAAA,IAAA,CACD;AAED,aAAS,mBAAmB;AAC1B,WAAK,aAAa;AAClB,UAAI,MAAM,mBAAmB;AACrB;MACR;AAAA,IACF;AAEA,aAAS,QAAQ;AACf,WAAK,OAAO;AACZ,WAAK,qBAAqB,KAAK;AAAA,IACjC;AACA,aAAS,OAAO;AAAA,IAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/HjB,GAAG,gBAAgB,SAAS;"}