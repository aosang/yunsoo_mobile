{"version":3,"file":"wd-img.js","sources":["uni_modules/wot-design-uni/components/wd-img/wd-img.vue","D:/software/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RjoveXVuc29vX21vYmlsZS91bmlfbW9kdWxlcy93b3QtZGVzaWduLXVuaS9jb21wb25lbnRzL3dkLWltZy93ZC1pbWcudnVl"],"sourcesContent":["<!--\r\n * @Author: 810505339\r\n * @Date: 2024-09-25 11:30:46\r\n * @LastEditors: 810505339\r\n * @LastEditTime: 2025-01-09 11:37:45\r\n * @FilePath: \\wot-design-uni\\src\\uni_modules\\wot-design-uni\\components\\wd-img\\wd-img.vue\r\n * 记得注释\r\n-->\r\n<template>\r\n  <view :class=\"rootClass\" @click=\"handleClick\" :style=\"rootStyle\">\r\n    <image\r\n      :class=\"`wd-img__image ${customImage}`\"\r\n      :style=\"status !== 'success' ? 'width: 0;height: 0;' : ''\"\r\n      :src=\"src\"\r\n      :mode=\"mode\"\r\n      :show-menu-by-longpress=\"showMenuByLongpress\"\r\n      :lazy-load=\"lazyLoad\"\r\n      @load=\"handleLoad\"\r\n      @error=\"handleError\"\r\n    />\r\n    <slot v-if=\"status === 'loading'\" name=\"loading\"></slot>\r\n    <slot v-if=\"status === 'error'\" name=\"error\"></slot>\r\n  </view>\r\n</template>\r\n<script lang=\"ts\">\r\nexport default {\r\n  name: 'wd-img',\r\n  options: {\r\n    virtualHost: true,\r\n    addGlobalClass: true,\r\n    styleIsolation: 'shared'\r\n  }\r\n}\r\n</script>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { computed, ref } from 'vue'\r\nimport { addUnit, isDef, objToStyle } from '../common/util'\r\nimport { imgProps } from './types'\r\n\r\nconst props = defineProps(imgProps)\r\nconst emit = defineEmits<{\r\n  (e: 'error', event: Event): void\r\n  (e: 'click', event: MouseEvent): void\r\n  (e: 'load', event: Event): void\r\n}>()\r\n\r\nconst rootStyle = computed(() => {\r\n  const style: Record<string, string | number> = {}\r\n  if (isDef(props.height)) {\r\n    style['height'] = addUnit(props.height)\r\n  }\r\n  if (isDef(props.width)) {\r\n    style['width'] = addUnit(props.width)\r\n  }\r\n  if (isDef(props.radius)) {\r\n    style['border-radius'] = addUnit(props.radius)\r\n    style['overflow'] = 'hidden'\r\n  }\r\n  return `${objToStyle(style)}${props.customStyle}`\r\n})\r\n\r\nconst rootClass = computed(() => {\r\n  return `wd-img  ${props.round ? 'is-round' : ''} ${props.customClass}`\r\n})\r\n\r\nconst status = ref<'loading' | 'error' | 'success'>('loading')\r\n\r\nfunction handleError(event: any) {\r\n  status.value = 'error'\r\n  emit('error', event)\r\n}\r\nfunction handleClick(event: MouseEvent) {\r\n  if (props.enablePreview && props.src && status.value == 'success') {\r\n    uni.previewImage({\r\n      urls: [props.previewSrc || props.src]\r\n    })\r\n  }\r\n  emit('click', event)\r\n}\r\nfunction handleLoad(event: any) {\r\n  status.value = 'success'\r\n  emit('load', event)\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import './index.scss';\r\n</style>\r\n","import Component from 'F:/yunsoo_mobile/uni_modules/wot-design-uni/components/wd-img/wd-img.vue'\nwx.createComponent(Component)"],"names":["computed","isDef","addUnit","objToStyle","ref","uni"],"mappings":";;;;AAyBA,MAAA,cAAe;AAAA,EACb,MAAM;AAAA,EACN,SAAS;AAAA,IACP,aAAa;AAAA,IACb,gBAAgB;AAAA,IAChB,gBAAgB;AAAA,EAClB;AACF;;;;;;AAQA,UAAM,QAAQ;AACd,UAAM,OAAO;AAMP,UAAA,YAAYA,cAAAA,SAAS,MAAM;AAC/B,YAAM,QAAyC,CAAA;AAC3C,UAAAC,gDAAA,MAAM,MAAM,MAAM,GAAG;AACvB,cAAM,QAAQ,IAAIC,gDAAQ,QAAA,MAAM,MAAM;AAAA,MACxC;AACI,UAAAD,gDAAA,MAAM,MAAM,KAAK,GAAG;AACtB,cAAM,OAAO,IAAIC,gDAAQ,QAAA,MAAM,KAAK;AAAA,MACtC;AACI,UAAAD,gDAAA,MAAM,MAAM,MAAM,GAAG;AACvB,cAAM,eAAe,IAAIC,gDAAQ,QAAA,MAAM,MAAM;AAC7C,cAAM,UAAU,IAAI;AAAA,MACtB;AACA,aAAO,GAAGC,gDAAAA,WAAW,KAAK,CAAC,GAAG,MAAM,WAAW;AAAA,IAAA,CAChD;AAEK,UAAA,YAAYH,cAAAA,SAAS,MAAM;AAC/B,aAAO,WAAW,MAAM,QAAQ,aAAa,EAAE,IAAI,MAAM,WAAW;AAAA,IAAA,CACrE;AAEK,UAAA,SAASI,kBAAqC,SAAS;AAE7D,aAAS,YAAY,OAAY;AAC/B,aAAO,QAAQ;AACf,WAAK,SAAS,KAAK;AAAA,IACrB;AACA,aAAS,YAAY,OAAmB;AACtC,UAAI,MAAM,iBAAiB,MAAM,OAAO,OAAO,SAAS,WAAW;AACjEC,sBAAAA,MAAI,aAAa;AAAA,UACf,MAAM,CAAC,MAAM,cAAc,MAAM,GAAG;AAAA,QAAA,CACrC;AAAA,MACH;AACA,WAAK,SAAS,KAAK;AAAA,IACrB;AACA,aAAS,WAAW,OAAY;AAC9B,aAAO,QAAQ;AACf,WAAK,QAAQ,KAAK;AAAA,IACpB;;;;;;;;;;;;;;;;;;;;;;;AClFA,GAAG,gBAAgB,SAAS;"}