{"version":3,"file":"wd-action-sheet.js","sources":["uni_modules/wot-design-uni/components/wd-action-sheet/wd-action-sheet.vue","D:/software/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RjoveXVuc29vX21vYmlsZS91bmlfbW9kdWxlcy93b3QtZGVzaWduLXVuaS9jb21wb25lbnRzL3dkLWFjdGlvbi1zaGVldC93ZC1hY3Rpb24tc2hlZXQudnVl"],"sourcesContent":["<template>\r\n  <view>\r\n    <wd-popup\r\n      custom-class=\"wd-action-sheet__popup\"\r\n      :custom-style=\"`${(actions && actions.length) || (panels && panels.length) ? 'background: transparent;' : ''}`\"\r\n      v-model=\"showPopup\"\r\n      :duration=\"duration\"\r\n      position=\"bottom\"\r\n      :close-on-click-modal=\"closeOnClickModal\"\r\n      :safe-area-inset-bottom=\"safeAreaInsetBottom\"\r\n      :lazy-render=\"lazyRender\"\r\n      @enter=\"handleOpen\"\r\n      @close=\"close\"\r\n      @after-enter=\"handleOpened\"\r\n      @after-leave=\"handleClosed\"\r\n      @click-modal=\"handleClickModal\"\r\n      :z-index=\"zIndex\"\r\n    >\r\n      <view\r\n        :class=\"`wd-action-sheet ${customClass}`\"\r\n        :style=\"`${\r\n          (actions && actions.length) || (panels && panels.length)\r\n            ? 'margin: 0 10px calc(var(--window-bottom) + 10px) 10px; border-radius: 16px;'\r\n            : 'margin-bottom: var(--window-bottom);'\r\n        } ${customStyle}`\"\r\n      >\r\n        <view v-if=\"title\" :class=\"`wd-action-sheet__header ${customHeaderClass}`\">\r\n          {{ title }}\r\n          <wd-icon custom-class=\"wd-action-sheet__close\" name=\"add\" @click=\"close\" />\r\n        </view>\r\n        <view class=\"wd-action-sheet__actions\" v-if=\"actions && actions.length\">\r\n          <button\r\n            v-for=\"(action, rowIndex) in actions\"\r\n            :key=\"rowIndex\"\r\n            :class=\"`wd-action-sheet__action ${action.disabled ? 'wd-action-sheet__action--disabled' : ''}  ${\r\n              action.loading ? 'wd-action-sheet__action--loading' : ''\r\n            }`\"\r\n            :style=\"`color: ${action.color}`\"\r\n            @click=\"select(rowIndex, 'action')\"\r\n          >\r\n            <wd-loading custom-class=\"`wd-action-sheet__action-loading\" v-if=\"action.loading\" />\r\n            <view v-else class=\"wd-action-sheet__name\">{{ action.name }}</view>\r\n            <view v-if=\"!action.loading && action.subname\" class=\"wd-action-sheet__subname\">{{ action.subname }}</view>\r\n          </button>\r\n        </view>\r\n        <view v-if=\"formatPanels && formatPanels.length\">\r\n          <view v-for=\"(panel, rowIndex) in formatPanels\" :key=\"rowIndex\" class=\"wd-action-sheet__panels\">\r\n            <view class=\"wd-action-sheet__panels-content\">\r\n              <view v-for=\"(col, colIndex) in panel\" :key=\"colIndex\" class=\"wd-action-sheet__panel\" @click=\"select(rowIndex, 'panels', colIndex)\">\r\n                <image class=\"wd-action-sheet__panel-img\" :src=\"(col as any).iconUrl\" />\r\n                <view class=\"wd-action-sheet__panel-title\">{{ (col as any).title }}</view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <slot />\r\n        <button v-if=\"cancelText\" class=\"wd-action-sheet__cancel\" @click=\"handleCancel\">{{ cancelText }}</button>\r\n      </view>\r\n    </wd-popup>\r\n  </view>\r\n</template>\r\n<script lang=\"ts\">\r\nexport default {\r\n  name: 'wd-action-sheet',\r\n  options: {\r\n    addGlobalClass: true,\r\n    virtualHost: true,\r\n    styleIsolation: 'shared'\r\n  }\r\n}\r\n</script>\r\n\r\n<script lang=\"ts\" setup>\r\nimport wdPopup from '../wd-popup/wd-popup.vue'\r\nimport wdIcon from '../wd-icon/wd-icon.vue'\r\nimport wdLoading from '../wd-loading/wd-loading.vue'\r\nimport { watch, ref } from 'vue'\r\nimport { actionSheetProps, type Panel } from './types'\r\nimport { isArray } from '../common/util'\r\n\r\nconst props = defineProps(actionSheetProps)\r\nconst emit = defineEmits(['select', 'click-modal', 'cancel', 'closed', 'close', 'open', 'opened', 'update:modelValue'])\r\n\r\nconst formatPanels = ref<Array<Panel> | Array<Panel[]>>([])\r\n\r\nconst showPopup = ref<boolean>(false)\r\n\r\nwatch(() => props.panels, computedValue, { deep: true, immediate: true })\r\n\r\nwatch(\r\n  () => props.modelValue,\r\n  (newValue) => {\r\n    showPopup.value = newValue\r\n  },\r\n  { deep: true, immediate: true }\r\n)\r\n\r\nfunction isPanelArray() {\r\n  return props.panels.length && !isArray(props.panels[0])\r\n}\r\nfunction computedValue() {\r\n  formatPanels.value = isPanelArray() ? [props.panels as Panel[]] : (props.panels as Panel[][])\r\n}\r\n\r\nfunction select(rowIndex: number, type: 'action' | 'panels', colIndex?: number) {\r\n  if (type === 'action') {\r\n    if (props.actions[rowIndex].disabled || props.actions[rowIndex].loading) {\r\n      return\r\n    }\r\n    emit('select', {\r\n      item: props.actions[rowIndex],\r\n      index: rowIndex\r\n    })\r\n  } else if (isPanelArray()) {\r\n    emit('select', {\r\n      item: props.panels[Number(colIndex)],\r\n      index: colIndex\r\n    })\r\n  } else {\r\n    emit('select', {\r\n      item: (props.panels as Panel[][])[rowIndex][Number(colIndex)],\r\n      rowIndex,\r\n      colIndex\r\n    })\r\n  }\r\n  if (props.closeOnClickAction) {\r\n    close()\r\n  }\r\n}\r\nfunction handleClickModal() {\r\n  emit('click-modal')\r\n}\r\nfunction handleCancel() {\r\n  emit('cancel')\r\n  close()\r\n}\r\nfunction close() {\r\n  emit('update:modelValue', false)\r\n  emit('close')\r\n}\r\nfunction handleOpen() {\r\n  emit('open')\r\n}\r\nfunction handleOpened() {\r\n  emit('opened')\r\n}\r\nfunction handleClosed() {\r\n  emit('closed')\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import './index.scss';\r\n</style>\r\n","import Component from 'F:/yunsoo_mobile/uni_modules/wot-design-uni/components/wd-action-sheet/wd-action-sheet.vue'\nwx.createComponent(Component)"],"names":["ref","watch","isArray"],"mappings":";;;;;;;AAyEA,MAAA,UAAoB,MAAA;AACpB,MAAA,SAAmB,MAAA;AACnB,MAAA,YAAsB,MAAA;AAbtB,MAAA,cAAe;AAAA,EACb,MAAM;AAAA,EACN,SAAS;AAAA,IACP,gBAAgB;AAAA,IAChB,aAAa;AAAA,IACb,gBAAgB;AAAA,EAClB;AACF;;;;;;AAWA,UAAM,QAAQ;AACd,UAAM,OAAO;AAEP,UAAA,eAAeA,kBAAmC,CAAA,CAAE;AAEpD,UAAA,YAAYA,kBAAa,KAAK;AAE9BC,wBAAA,MAAM,MAAM,QAAQ,eAAe,EAAE,MAAM,MAAM,WAAW,KAAA,CAAM;AAExEA,kBAAA;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,CAAC,aAAa;AACZ,kBAAU,QAAQ;AAAA,MACpB;AAAA,MACA,EAAE,MAAM,MAAM,WAAW,KAAK;AAAA,IAAA;AAGhC,aAAS,eAAe;AACf,aAAA,MAAM,OAAO,UAAU,CAACC,wDAAQ,MAAM,OAAO,CAAC,CAAC;AAAA,IACxD;AACA,aAAS,gBAAgB;AACvB,mBAAa,QAAQ,iBAAiB,CAAC,MAAM,MAAiB,IAAK,MAAM;AAAA,IAC3E;AAES,aAAA,OAAO,UAAkB,MAA2B,UAAmB;AAC9E,UAAI,SAAS,UAAU;AACjB,YAAA,MAAM,QAAQ,QAAQ,EAAE,YAAY,MAAM,QAAQ,QAAQ,EAAE,SAAS;AACvE;AAAA,QACF;AACA,aAAK,UAAU;AAAA,UACb,MAAM,MAAM,QAAQ,QAAQ;AAAA,UAC5B,OAAO;AAAA,QAAA,CACR;AAAA,MAAA,WACQ,gBAAgB;AACzB,aAAK,UAAU;AAAA,UACb,MAAM,MAAM,OAAO,OAAO,QAAQ,CAAC;AAAA,UACnC,OAAO;AAAA,QAAA,CACR;AAAA,MAAA,OACI;AACL,aAAK,UAAU;AAAA,UACb,MAAO,MAAM,OAAqB,QAAQ,EAAE,OAAO,QAAQ,CAAC;AAAA,UAC5D;AAAA,UACA;AAAA,QAAA,CACD;AAAA,MACH;AACA,UAAI,MAAM,oBAAoB;AACtB;MACR;AAAA,IACF;AACA,aAAS,mBAAmB;AAC1B,WAAK,aAAa;AAAA,IACpB;AACA,aAAS,eAAe;AACtB,WAAK,QAAQ;AACP;IACR;AACA,aAAS,QAAQ;AACf,WAAK,qBAAqB,KAAK;AAC/B,WAAK,OAAO;AAAA,IACd;AACA,aAAS,aAAa;AACpB,WAAK,MAAM;AAAA,IACb;AACA,aAAS,eAAe;AACtB,WAAK,QAAQ;AAAA,IACf;AACA,aAAS,eAAe;AACtB,WAAK,QAAQ;AAAA,IACf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnJA,GAAG,gBAAgB,SAAS;"}