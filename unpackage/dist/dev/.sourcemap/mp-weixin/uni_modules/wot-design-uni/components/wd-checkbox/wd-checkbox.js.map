{"version":3,"file":"wd-checkbox.js","sources":["uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue","D:/software/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RjoveXVuc29vX21vYmlsZS91bmlfbW9kdWxlcy93b3QtZGVzaWduLXVuaS9jb21wb25lbnRzL3dkLWNoZWNrYm94L3dkLWNoZWNrYm94LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view\r\n    :class=\"`wd-checkbox ${innerCell ? 'is-cell-box' : ''} ${innerShape === 'button' ? 'is-button-box' : ''} ${isChecked ? 'is-checked' : ''} ${\r\n      isFirst ? 'is-first-child' : ''\r\n    } ${isLast ? 'is-last-child' : ''} ${innerInline ? 'is-inline' : ''} ${innerShape === 'button' ? 'is-button' : ''} ${\r\n      innerDisabled ? 'is-disabled' : ''\r\n    } ${innerSize ? 'is-' + innerSize : ''} ${customClass}`\"\r\n    :style=\"customStyle\"\r\n    @click=\"toggle\"\r\n  >\r\n    <!--shape为button时，移除wd-checkbox__shape，只保留wd-checkbox__label-->\r\n    <view\r\n      v-if=\"innerShape !== 'button'\"\r\n      :class=\"`wd-checkbox__shape ${innerShape === 'square' ? 'is-square' : ''} ${customShapeClass}`\"\r\n      :style=\"isChecked && !innerDisabled && innerCheckedColor ? 'color :' + innerCheckedColor : ''\"\r\n    >\r\n      <wd-icon custom-class=\"wd-checkbox__check\" name=\"check-bold\" />\r\n    </view>\r\n    <!--shape为button时只保留wd-checkbox__label-->\r\n    <view\r\n      :class=\"`wd-checkbox__label ${customLabelClass}`\"\r\n      :style=\"isChecked && innerShape === 'button' && !innerDisabled && innerCheckedColor ? 'color:' + innerCheckedColor : ''\"\r\n    >\r\n      <!--button选中时展示的icon-->\r\n      <wd-icon v-if=\"innerShape === 'button' && isChecked\" custom-class=\"wd-checkbox__btn-check\" name=\"check-bold\" />\r\n      <!--文案-->\r\n      <view class=\"wd-checkbox__txt\" :style=\"maxWidth ? 'max-width:' + maxWidth : ''\">\r\n        <slot></slot>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nexport default {\r\n  name: 'wd-checkbox',\r\n  options: {\r\n    addGlobalClass: true,\r\n    virtualHost: true,\r\n    styleIsolation: 'shared'\r\n  }\r\n}\r\n</script>\r\n\r\n<script lang=\"ts\" setup>\r\nimport wdIcon from '../wd-icon/wd-icon.vue'\r\nimport { computed, getCurrentInstance, onBeforeMount, watch } from 'vue'\r\nimport { useParent } from '../composables/useParent'\r\nimport { CHECKBOX_GROUP_KEY } from '../wd-checkbox-group/types'\r\nimport { getPropByPath, isDef } from '../common/util'\r\nimport { checkboxProps, type CheckboxExpose } from './types'\r\n\r\nconst props = defineProps(checkboxProps)\r\nconst emit = defineEmits(['change', 'update:modelValue'])\r\n\r\ndefineExpose<CheckboxExpose>({\r\n  toggle\r\n})\r\n\r\nconst { parent: checkboxGroup, index } = useParent(CHECKBOX_GROUP_KEY)\r\n\r\nconst isChecked = computed(() => {\r\n  if (checkboxGroup) {\r\n    return checkboxGroup.props.modelValue.indexOf(props.modelValue) > -1\r\n  } else {\r\n    return props.modelValue === props.trueValue\r\n  }\r\n}) // 是否被选中\r\n\r\nconst isFirst = computed(() => {\r\n  return index.value === 0\r\n})\r\n\r\nconst isLast = computed(() => {\r\n  const children = isDef(checkboxGroup) ? checkboxGroup.children : []\r\n  return index.value === children.length - 1\r\n})\r\nconst { proxy } = getCurrentInstance() as any\r\n\r\nwatch(\r\n  () => props.modelValue,\r\n  () => {\r\n    // 组合使用走这个逻辑\r\n    if (checkboxGroup) {\r\n      checkName()\r\n    }\r\n  }\r\n)\r\n\r\nwatch(\r\n  () => props.shape,\r\n  (newValue) => {\r\n    const type = ['circle', 'square', 'button']\r\n    if (isDef(newValue) && type.indexOf(newValue) === -1) uni.__f__('error','at uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue:94',`shape must be one of ${type.toString()}`)\r\n  }\r\n)\r\n\r\nconst innerShape = computed(() => {\r\n  return props.shape || getPropByPath(checkboxGroup, 'props.shape') || 'circle'\r\n})\r\n\r\nconst innerCheckedColor = computed(() => {\r\n  return props.checkedColor || getPropByPath(checkboxGroup, 'props.checkedColor')\r\n})\r\n\r\nconst innerDisabled = computed(() => {\r\n  if (!checkboxGroup) {\r\n    return props.disabled\r\n  }\r\n  const { max, min, modelValue, disabled } = checkboxGroup.props\r\n  if (\r\n    (max && modelValue.length >= max && !isChecked.value) ||\r\n    (min && modelValue.length <= min && isChecked.value) ||\r\n    props.disabled === true ||\r\n    (disabled && props.disabled === null)\r\n  ) {\r\n    return true\r\n  }\r\n\r\n  return props.disabled\r\n})\r\n\r\nconst innerInline = computed(() => {\r\n  return getPropByPath(checkboxGroup, 'props.inline') || false\r\n})\r\n\r\nconst innerCell = computed(() => {\r\n  return getPropByPath(checkboxGroup, 'props.cell') || false\r\n})\r\n\r\nconst innerSize = computed(() => {\r\n  return props.size || getPropByPath(checkboxGroup, 'props.size')\r\n})\r\n\r\nonBeforeMount(() => {\r\n  // eslint-disable-next-line quotes\r\n  if (props.modelValue === null) uni.__f__('error','at uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue:137',\"checkbox's value must be set\")\r\n})\r\n\r\n/**\r\n * @description 检测checkbox绑定的value是否和其它checkbox的value冲突\r\n * @param {Object} self 自身\r\n * @param  myName 自己的标识符\r\n */\r\nfunction checkName() {\r\n  checkboxGroup &&\r\n    checkboxGroup.children &&\r\n    checkboxGroup.children.forEach((child: any) => {\r\n      if (child.$.uid !== proxy.$.uid && child.modelValue === props.modelValue) {\r\n        uni.__f__('error','at uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue:150',`The checkbox's bound value: ${props.modelValue} has been used`)\r\n      }\r\n    })\r\n}\r\n/**\r\n * @description 点击checkbox的Event handle\r\n */\r\nfunction toggle() {\r\n  if (innerDisabled.value) return\r\n  // 复选框单独使用时点击反选，并且在checkbox上触发change事件\r\n  if (checkboxGroup) {\r\n    emit('change', {\r\n      value: !isChecked.value\r\n    })\r\n    checkboxGroup.changeSelectState(props.modelValue)\r\n  } else {\r\n    const newVal = props.modelValue === props.trueValue ? props.falseValue : props.trueValue\r\n    emit('update:modelValue', newVal)\r\n    emit('change', {\r\n      value: newVal\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import './index.scss';\r\n</style>\r\n","import Component from 'F:/yunsoo_mobile/uni_modules/wot-design-uni/components/wd-checkbox/wd-checkbox.vue'\nwx.createComponent(Component)"],"names":["useParent","CHECKBOX_GROUP_KEY","computed","isDef","getCurrentInstance","watch","uni","getPropByPath","onBeforeMount"],"mappings":"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"}