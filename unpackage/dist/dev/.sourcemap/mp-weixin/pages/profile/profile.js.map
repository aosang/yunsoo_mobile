{"version":3,"file":"profile.js","sources":["pages/profile/profile.vue","D:/software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9wcm9maWxlLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<Navigation />\r\n\t<wd-toast />\r\n\t<view class=\"profile_box\">\r\n\t\t<view class=\"profile_box_avatar\">\r\n\t\t\t<wd-img\r\n\t\t\t\tround \r\n\t\t\t\t:width=\"68\" \r\n\t\t\t\t:height=\"68\" \r\n\t\t\t\t:src=\"userInfo.userAvatarUrl? userInfo.userAvatarUrl : baseUrl \" \r\n\t\t\t\t:enable-preview=\"true\" \r\n\t\t\t/>\r\n\t\t\t<text>{{ userInfo.userMyName }}</text>\r\n\t\t</view>\r\n\t</view>\r\n\t\r\n\t<view class=\"profile_info\">\r\n\t\t<view class=\"profile_info_item\">\r\n\t\t\t<view class=\"profile_name\">\r\n\t\t\t\t<image src=\"/static/images/profile/profile_email.svg\" mode=\"widthFix\" />\r\n\t\t\t\t<text>电子邮箱</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"profile_value\">{{ userInfo.userEmail }}</view>\r\n\t\t</view>\r\n\t\t<view class=\"profile_info_item\">\r\n\t\t\t<view class=\"profile_name\">\r\n\t\t\t\t<image src=\"/static/images/profile/profile_company.svg\" mode=\"widthFix\" />\r\n\t\t\t\t<text>公司名称</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"profile_value\">{{ userInfo.userCompany }}</view>\r\n\t\t</view>\r\n\t\t<view class=\"profile_info_item\">\r\n\t\t\t<view class=\"profile_name\">\r\n\t\t\t\t<image src=\"/static/images/profile/profile_time.svg\" mode=\"widthFix\" />\r\n\t\t\t\t<text>注册时间</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"profile_value\">{{ userInfo.userTime }}</view>\r\n\t\t</view>\r\n\t\t<view class=\"profile_info_item\">\r\n\t\t\t<view class=\"profile_name\">\r\n\t\t\t\t<image src=\"/static/images/profile/profile_version.svg\" mode=\"widthFix\" />\r\n\t\t\t\t<text>软件版本</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"profile_value\">v1.0.0</view>\r\n\t\t</view>\r\n\t\t<wd-button \r\n\t\t\tsize=\"large\" \r\n\t\t\tcustom-class=\"custom-logout\"\r\n\t\t\t@click=\"logoutHandler\"\r\n\t\t>\r\n\t\t\t退出登录\r\n\t\t</wd-button>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport { reactive, ref, onMounted, nextTick } from 'vue'\r\n\timport Navigation from '@/components/navigation_header.vue'\r\n\tconst baseUrl = 'https://www.wangle.run/company_icon/public_image/pub_avatar.jpg'\r\n\timport { useToast } from '@/uni_modules/wot-design-uni'\r\n\tconst toast = useToast()\r\n\timport { requestMethods } from '@/request/request.js'\r\n\timport { onLoad } from '@dcloudio/uni-app'\r\n\timport { userInfoStore } from '@/stores/userInfo'\r\n\tconst userStore = userInfoStore()\r\n\t\r\n\tconst userInfo = reactive({\r\n\t\tuserEmail: '',\r\n\t\tuserCompany: '',\r\n\t\tuserAvatarUrl: '',\r\n\t\tuserMyName: '',\r\n\t\tuserTime: ''\r\n\t})\r\n\t\t\r\n\tonMounted(() => {\r\n\t\tnextTick(() => {\r\n\t\t\tgetProfileInfo()\r\n\t\t})\r\n\t})\r\n\t\r\n\tconst getProfileInfo = async () => {\r\n\t\tlet res = await requestMethods('/Profile', 'GET', {\r\n\t\t\tuser_id: userStore.userId\r\n\t\t})\r\n\t\t\r\n\t\tif(res.code === 200) {\r\n\t\t\tuserInfo.userEmail = res.data[0].email || '--'\r\n\t\t\tuserInfo.userCompany = res.data[0].company || '--'\r\n\t\t\tuserInfo.userAvatarUrl = res.data[0].avatar_url || '--'\r\n\t\t\tuserInfo.userMyName = res.data[0].username || '--'\r\n\t\t\tuserInfo.userTime = res.data[0].created_at || '--'\r\n\t\t}\r\n\t}\r\n\r\n\tconst logoutHandler = async () => {\r\n\t\tlet res = await requestMethods('/Logout', 'POST')\r\n\t\tif(res.code === 200) {\r\n\t\t\ttoast.show({\r\n\t\t\t\ticonName: 'success',\r\n\t\t\t\tmsg: '已退出!',\r\n\t\t\t\tduration: 600,\r\n\t\t\t\tclosed: () => {\r\n\t\t\t\t\tuserStore.clearUser()\r\n\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}else {\r\n\t\t\ttoast.error('退出异常!')\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.profile_box {\r\n\t\twidth: 100%;\r\n\t\theight: 350rpx;\r\n\t\tbackground: #2a6fff;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\t\r\n\t\t.profile_box_avatar {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tmargin-top: 80rpx;\r\n\t\t\t\r\n\t\t\ttext {\r\n\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.profile_info {\r\n\t\t:deep() {\r\n\t\t\t.custom-logout {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\twidth: 680rpx;\r\n\t\t\t\tbackground: #2a6fff !important;\r\n\t\t\t\tmargin: 40rpx auto 0 auto;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.profile_info_item {\r\n\t\t\tdisplay: flex;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tborder-bottom: 1px solid #eee;\r\n\t\t\t\r\n\t\t\t.profile_value {\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.profile_name {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\t\r\n\t\t\t\ttext {\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\timage {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\twidth: 40rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n","import MiniProgramPage from 'F:/yunsoo_mobile/pages/profile/profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["useToast","userInfoStore","reactive","onMounted","nextTick","requestMethods","uni","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;;;;AAyDC,MAAM,aAAa,MAAW;AAC9B,MAAM,UAAU;;;;AAEhB,UAAM,QAAQA,kDAAAA,SAAU;AAIxB,UAAM,YAAYC,gBAAAA,cAAe;AAEjC,UAAM,WAAWC,cAAAA,SAAS;AAAA,MACzB,WAAW;AAAA,MACX,aAAa;AAAA,MACb,eAAe;AAAA,MACf,YAAY;AAAA,MACZ,UAAU;AAAA,IACZ,CAAE;AAEDC,kBAAAA,UAAU,MAAM;AACfC,oBAAAA,WAAS,MAAM;AACd,uBAAgB;AAAA,MACnB,CAAG;AAAA,IACH,CAAE;AAED,UAAM,iBAAiB,YAAY;AAClC,UAAI,MAAM,MAAMC,+BAAe,YAAY,OAAO;AAAA,QACjD,SAAS,UAAU;AAAA,MACtB,CAAG;AAED,UAAG,IAAI,SAAS,KAAK;AACpB,iBAAS,YAAY,IAAI,KAAK,CAAC,EAAE,SAAS;AAC1C,iBAAS,cAAc,IAAI,KAAK,CAAC,EAAE,WAAW;AAC9C,iBAAS,gBAAgB,IAAI,KAAK,CAAC,EAAE,cAAc;AACnD,iBAAS,aAAa,IAAI,KAAK,CAAC,EAAE,YAAY;AAC9C,iBAAS,WAAW,IAAI,KAAK,CAAC,EAAE,cAAc;AAAA,MAC9C;AAAA,IACD;AAED,UAAM,gBAAgB,YAAY;AACjC,UAAI,MAAM,MAAMA,+BAAe,WAAW,MAAM;AAChD,UAAG,IAAI,SAAS,KAAK;AACpB,cAAM,KAAK;AAAA,UACV,UAAU;AAAA,UACV,KAAK;AAAA,UACL,UAAU;AAAA,UACV,QAAQ,MAAM;AACb,sBAAU,UAAW;AACrBC,0BAAAA,MAAI,SAAS;AAAA,cACZ,KAAK;AAAA,YACX,CAAM;AAAA,UACD;AAAA,QACL,CAAI;AAAA,MACJ,OAAQ;AACL,cAAM,MAAM,OAAO;AAAA,MACnB;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9GF,GAAG,WAAWC,SAAe;"}